import{S as te,i as le,s as ne,k,q as R,a as w,l as E,m as C,r as z,h as v,c as O,n as A,b as H,I as h,a6 as x,J as L,u as ae,N as J,a8 as ke,K as Z,v as $,d as P,f as ee,g as F,y as Q,z as W,A as X,B as Y,H as ce,C as Ae,L as re,T as pe,a7 as ye}from"./index.4a9c39e8.js";import{t as fe,s as ue,A as Ce}from"./extraEffects.7ebd26d5.js";import{v as Ie}from"./CardTemplateSelector.9a37b3d4.js";function de(a,e,t){const l=a.slice();return l[11]=e[t],l[13]=t,l}function he(a){let e,t,l;function r(){return a[10](a[13])}return{c(){e=k("button"),this.h()},l(i){e=E(i,"BUTTON",{class:!0}),C(e).forEach(v),this.h()},h(){A(e,"class","delete is-small")},m(i,c){H(i,e,c),t||(l=L(e,"click",r),t=!0)},p(i,c){a=i},d(i){i&&v(e),t=!1,l()}}}function ge(a){let e,t=a[11]+"",l,r,i,c=a[3]&&he(a);return{c(){e=k("span"),l=R(t),r=w(),c&&c.c(),i=w(),this.h()},l(o){e=E(o,"SPAN",{class:!0});var n=C(e);l=z(n,t),r=O(n),c&&c.l(n),i=O(n),n.forEach(v),this.h()},h(){A(e,"class","tag is-secondary svelte-1m7c7ig")},m(o,n){H(o,e,n),h(e,l),h(e,r),c&&c.m(e,null),h(e,i)},p(o,n){n&1&&t!==(t=o[11]+"")&&ae(l,t),o[3]?c?c.p(o,n):(c=he(o),c.c(),c.m(e,i)):c&&(c.d(1),c=null)},d(o){o&&v(e),c&&c.d()}}}function De(a){let e,t,l,r,i,c,o,n,s,g,u,_,I,m,V,d,b,y,T=a[0],f=[];for(let p=0;p<T.length;p+=1)f[p]=ge(de(a,T,p));return{c(){e=k("div"),t=k("label"),l=R(a[1]),r=w(),i=k("div"),c=k("div"),o=k("div"),n=k("div"),s=k("input"),g=w(),u=k("div"),_=k("button"),I=R("Add Tag"),V=w(),d=k("div");for(let p=0;p<f.length;p+=1)f[p].c();this.h()},l(p){e=E(p,"DIV",{class:!0});var U=C(e);t=E(U,"LABEL",{class:!0});var D=C(t);l=z(D,a[1]),D.forEach(v),r=O(U),i=E(U,"DIV",{class:!0});var q=C(i);c=E(q,"DIV",{class:!0});var M=C(c);o=E(M,"DIV",{class:!0});var j=C(o);n=E(j,"DIV",{class:!0});var B=C(n);s=E(B,"INPUT",{class:!0,type:!0,placeholder:!0}),B.forEach(v),g=O(j),u=E(j,"DIV",{class:!0});var S=C(u);_=E(S,"BUTTON",{class:!0});var N=C(_);I=z(N,"Add Tag"),N.forEach(v),S.forEach(v),j.forEach(v),V=O(M),d=E(M,"DIV",{class:!0});var K=C(d);for(let G=0;G<f.length;G+=1)f[G].l(K);K.forEach(v),M.forEach(v),q.forEach(v),U.forEach(v),this.h()},h(){A(t,"class","label"),A(s,"class","input"),A(s,"type","text"),A(s,"placeholder",a[2]),A(n,"class","control"),A(_,"class","button is-primary"),_.disabled=m=!a[4].trim(),A(u,"class","control"),A(o,"class","field has-addons"),A(d,"class","tags svelte-1m7c7ig"),A(c,"class","tag-input"),A(i,"class","control"),A(e,"class","field")},m(p,U){H(p,e,U),h(e,t),h(t,l),h(e,r),h(e,i),h(i,c),h(c,o),h(o,n),h(n,s),x(s,a[4]),h(o,g),h(o,u),h(u,_),h(_,I),h(c,V),h(c,d);for(let D=0;D<f.length;D+=1)f[D]&&f[D].m(d,null);b||(y=[L(s,"input",a[8]),L(s,"keydown",a[9]),L(_,"click",a[5])],b=!0)},p(p,[U]){if(U&2&&ae(l,p[1]),U&4&&A(s,"placeholder",p[2]),U&16&&s.value!==p[4]&&x(s,p[4]),U&16&&m!==(m=!p[4].trim())&&(_.disabled=m),U&73){T=p[0];let D;for(D=0;D<T.length;D+=1){const q=de(p,T,D);f[D]?f[D].p(q,U):(f[D]=ge(q),f[D].c(),f[D].m(d,null))}for(;D<f.length;D+=1)f[D].d(1);f.length=T.length}},i:J,o:J,d(p){p&&v(e),ke(f,p),b=!1,Z(y)}}}function Ve(a,e,t){let{tags:l=[]}=e,{onTagsChange:r}=e,{label:i="Tags"}=e,{placeholder:c="enter tags"}=e,{deleteable:o=!0}=e,n="";function s(){if(n.trim()!==""){const m=[...l,n.trim()];r(m),t(4,n="")}}function g(m){const V=l.filter((d,b)=>b!==m);r(V)}function u(){n=this.value,t(4,n)}const _=m=>{m.key==="Enter"&&s()},I=m=>g(m);return a.$$set=m=>{"tags"in m&&t(0,l=m.tags),"onTagsChange"in m&&t(7,r=m.onTagsChange),"label"in m&&t(1,i=m.label),"placeholder"in m&&t(2,c=m.placeholder),"deleteable"in m&&t(3,o=m.deleteable)},[l,i,c,o,n,s,g,r,u,_,I]}class we extends te{constructor(e){super(),le(this,e,Ve,De,ne,{tags:0,onTagsChange:7,label:1,placeholder:2,deleteable:3})}}function _e(a,e,t){const l=a.slice();return l[17]=e[t],l}function Oe(a){let e,t,l,r,i,c,o=a[1],n=[];for(let s=0;s<o.length;s+=1)n[s]=be(_e(a,o,s));return{c(){e=k("div");for(let s=0;s<n.length;s+=1)n[s].c();t=w(),l=k("span"),r=R("+"),this.h()},l(s){e=E(s,"DIV",{class:!0});var g=C(e);for(let _=0;_<n.length;_+=1)n[_].l(g);t=O(g),l=E(g,"SPAN",{class:!0});var u=C(l);r=z(u,"+"),u.forEach(v),g.forEach(v),this.h()},h(){A(l,"class","tag svelte-ys4b97"),A(e,"class","tags svelte-ys4b97")},m(s,g){H(s,e,g);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);h(e,t),h(e,l),h(l,r),i||(c=[L(l,"click",a[8]),L(l,"keydown",a[9])],i=!0)},p(s,g){if(g&1123){o=s[1];let u;for(u=0;u<o.length;u+=1){const _=_e(s,o,u);n[u]?n[u].p(_,g):(n[u]=be(_),n[u].c(),n[u].m(e,t))}for(;u<n.length;u+=1)n[u].d(1);n.length=o.length}},i:J,o:J,d(s){s&&v(e),ke(n,s),i=!1,Z(c)}}}function Se(a){let e,t,l,r,i,c,o;return e=new we({props:{label:"",onTagsChange:a[7],tags:a[1],deleteable:a[3]}}),{c(){Q(e.$$.fragment),t=w(),l=k("button"),r=R("Done"),this.h()},l(n){W(e.$$.fragment,n),t=O(n),l=E(n,"BUTTON",{class:!0});var s=C(l);r=z(s,"Done"),s.forEach(v),this.h()},h(){A(l,"class","button is-small is-light")},m(n,s){X(e,n,s),H(n,t,s),H(n,l,s),h(l,r),i=!0,c||(o=L(l,"click",a[8]),c=!0)},p(n,s){const g={};s&2&&(g.tags=n[1]),s&8&&(g.deleteable=n[3]),e.$set(g)},i(n){i||(F(e.$$.fragment,n),i=!0)},o(n){P(e.$$.fragment,n),i=!1},d(n){Y(e,n),n&&v(t),n&&v(l),c=!1,o()}}}function be(a){let e,t=a[17]+"",l,r,i;function c(){return a[14](a[17])}return{c(){e=k("span"),l=R(t),this.h()},l(o){e=E(o,"SPAN",{class:!0});var n=C(e);l=z(n,t),n.forEach(v),this.h()},h(){A(e,"class","tag "+a[5]()+" svelte-ys4b97"),ce(e,"selected",a[0].includes(a[17]))},m(o,n){H(o,e,n),h(e,l),r||(i=[L(e,"click",c),L(e,"keydown",a[10])],r=!0)},p(o,n){a=o,n&2&&t!==(t=a[17]+"")&&ae(l,t),n&3&&ce(e,"selected",a[0].includes(a[17]))},d(o){o&&v(e),r=!1,Z(i)}}}function Ue(a){let e,t,l,r,i,c,o;const n=[Se,Oe],s=[];function g(u,_){return u[4]?0:1}return i=g(a),c=s[i]=n[i](a),{c(){e=k("div"),t=k("label"),l=R(a[2]),r=w(),c.c(),this.h()},l(u){e=E(u,"DIV",{class:!0});var _=C(e);t=E(_,"LABEL",{class:!0});var I=C(t);l=z(I,a[2]),I.forEach(v),r=O(_),c.l(_),_.forEach(v),this.h()},h(){A(t,"class","label"),A(e,"class","tag-picker svelte-ys4b97")},m(u,_){H(u,e,_),h(e,t),h(t,l),h(e,r),s[i].m(e,null),o=!0},p(u,[_]){(!o||_&4)&&ae(l,u[2]);let I=i;i=g(u),i===I?s[i].p(u,_):($(),P(s[I],1,1,()=>{s[I]=null}),ee(),c=s[i],c?c.p(u,_):(c=s[i]=n[i](u),c.c()),F(c,1),c.m(e,null))},i(u){o||(F(c),o=!0)},o(u){P(c),o=!1},d(u){u&&v(e),s[i].d()}}}function Ne(a,e,t){let{selectedTags:l=[]}=e,{availableTags:r=[]}=e,{label:i="Tags"}=e,{onTagsChange:c=()=>null}=e,{onUpdateTagOptions:o=()=>null}=e,{tagSize:n=null}=e,{deleteable:s=!0}=e,g=!1;function u(){return n?`tag-picker-size-${n}`:""}function _(f){l.includes(f)?t(0,l=l.filter(p=>p!==f)):t(0,l=[...l,f]),c(l)}function I(f){return l.filter(p=>!f.includes(p))}function m(f){f.forEach(p=>_(p))}function V(f){m(I(f)),t(1,r=f),o(f)}function d(){t(4,g=!g)}function b(f){f.key==="Enter"&&d()}function y(f){f.key==="Enter"&&d()}const T=f=>_(f);return a.$$set=f=>{"selectedTags"in f&&t(0,l=f.selectedTags),"availableTags"in f&&t(1,r=f.availableTags),"label"in f&&t(2,i=f.label),"onTagsChange"in f&&t(11,c=f.onTagsChange),"onUpdateTagOptions"in f&&t(12,o=f.onUpdateTagOptions),"tagSize"in f&&t(13,n=f.tagSize),"deleteable"in f&&t(3,s=f.deleteable)},u(),[l,r,i,s,g,u,_,V,d,b,y,c,o,n,T]}class me extends te{constructor(e){super(),le(this,e,Ne,Ue,ne,{selectedTags:0,availableTags:1,label:2,onTagsChange:11,onUpdateTagOptions:12,tagSize:13,deleteable:3})}}function Be(a){let e,t,l,r,i,c,o,n,s,g,u,_,I,m,V,d,b,y,T,f,p,U,D,q,M,j;return i=new me({props:{label:"Triggers",availableTags:a[4],selectedTags:a[1],onTagsChange:a[7],onUpdateTagOptions:a[8],tagSize:"large"}}),m=new me({props:{label:"Extra Effects",availableTags:a[5],selectedTags:a[3],onTagsChange:a[9],onUpdateTagOptions:a[10]}}),{c(){e=k("div"),t=k("hr"),l=w(),r=k("div"),Q(i.$$.fragment),c=w(),o=k("div"),n=k("label"),s=R("Action Effect"),g=w(),u=k("div"),_=k("input"),I=w(),Q(m.$$.fragment),V=w(),d=k("button"),b=R("Add Action"),T=w(),f=k("button"),p=R("Cancel"),U=w(),D=k("hr"),this.h()},l(B){e=E(B,"DIV",{});var S=C(e);t=E(S,"HR",{}),l=O(S),r=E(S,"DIV",{});var N=C(r);W(i.$$.fragment,N),c=O(N),o=E(N,"DIV",{class:!0});var K=C(o);n=E(K,"LABEL",{class:!0});var G=C(n);s=z(G,"Action Effect"),G.forEach(v),g=O(K),u=E(K,"DIV",{class:!0});var se=C(u);_=E(se,"INPUT",{class:!0,type:!0,placeholder:!0}),se.forEach(v),K.forEach(v),I=O(N),W(m.$$.fragment,N),V=O(N),d=E(N,"BUTTON",{class:!0});var ie=C(d);b=z(ie,"Add Action"),ie.forEach(v),T=O(N),f=E(N,"BUTTON",{class:!0});var oe=C(f);p=z(oe,"Cancel"),oe.forEach(v),N.forEach(v),U=O(S),D=E(S,"HR",{}),S.forEach(v),this.h()},h(){A(n,"class","label"),A(_,"class","input"),A(_,"type","text"),A(_,"placeholder","Move 1, Harm 2"),A(u,"class","control"),A(o,"class","field"),A(d,"class","button is-primary"),d.disabled=y=!a[2].length,A(f,"class","button is-secondary")},m(B,S){H(B,e,S),h(e,t),h(e,l),h(e,r),X(i,r,null),h(r,c),h(r,o),h(o,n),h(n,s),h(o,g),h(o,u),h(u,_),x(_,a[2]),h(r,I),X(m,r,null),h(r,V),h(r,d),h(d,b),h(r,T),h(r,f),h(f,p),h(e,U),h(e,D),q=!0,M||(j=[L(_,"input",a[14]),L(d,"click",a[15]),L(f,"click",function(){Ae(a[0])&&a[0].apply(this,arguments)})],M=!0)},p(B,[S]){a=B;const N={};S&16&&(N.availableTags=a[4]),S&2&&(N.selectedTags=a[1]),i.$set(N),S&4&&_.value!==a[2]&&x(_,a[2]);const K={};S&32&&(K.availableTags=a[5]),S&8&&(K.selectedTags=a[3]),m.$set(K),(!q||S&4&&y!==(y=!a[2].length))&&(d.disabled=y)},i(B){q||(F(i.$$.fragment,B),F(m.$$.fragment,B),q=!0)},o(B){P(i.$$.fragment,B),P(m.$$.fragment,B),q=!1},d(B){B&&v(e),Y(i),Y(m),M=!1,Z(j)}}}function Le(a,e,t){let l,r;re(a,fe,T=>t(4,l=T)),re(a,ue,T=>t(5,r=T));let{onAddAction:i=()=>null}=e,{onCancel:c=()=>null}=e,{action:o=null}=e,n=(o==null?void 0:o.triggers)||[],s=(o==null?void 0:o.actionEffect)||"",g=(o==null?void 0:o.extraEffects)||[],u=(o==null?void 0:o.id)||Ie();function _(T){t(1,n=T)}function I(T){fe.update(T)}function m(T){t(3,g=T)}function V(T){ue.update(T)}function d(T){i(T)}function b(){s=this.value,t(2,s)}const y=()=>d({id:u,triggers:n,actionEffect:s,extraEffects:g});return a.$$set=T=>{"onAddAction"in T&&t(12,i=T.onAddAction),"onCancel"in T&&t(0,c=T.onCancel),"action"in T&&t(13,o=T.action)},[c,n,s,g,l,r,u,_,I,m,V,d,i,o,b,y]}class Ee extends te{constructor(e){super(),le(this,e,Le,Be,ne,{onAddAction:12,onCancel:0,action:13})}}function ve(a,e,t){const l=a.slice();return l[17]=e[t],l}function Re(a){let e,t,l,r,i,c,o,n,s,g,u,_,I;l=new Ce({props:{action:a[17]}});function m(){return a[14](a[17])}function V(){return a[15](a[17])}return{c(){e=k("div"),t=k("div"),Q(l.$$.fragment),r=w(),i=k("div"),c=k("button"),o=R("Edit"),n=w(),s=k("button"),g=R("Remove"),this.h()},l(d){e=E(d,"DIV",{class:!0});var b=C(e);t=E(b,"DIV",{class:!0});var y=C(t);W(l.$$.fragment,y),y.forEach(v),r=O(b),i=E(b,"DIV",{});var T=C(i);c=E(T,"BUTTON",{class:!0});var f=C(c);o=z(f,"Edit"),f.forEach(v),n=O(T),s=E(T,"BUTTON",{class:!0});var p=C(s);g=z(p,"Remove"),p.forEach(v),T.forEach(v),b.forEach(v),this.h()},h(){A(t,"class","is-flex-grow-1"),A(c,"class","button is-light"),A(s,"class","button is-danger"),A(e,"class","is-flex is-align-items-center")},m(d,b){H(d,e,b),h(e,t),X(l,t,null),h(e,r),h(e,i),h(i,c),h(c,o),h(i,n),h(i,s),h(s,g),u=!0,_||(I=[L(c,"click",m),L(s,"click",V)],_=!0)},p(d,b){a=d;const y={};b&1&&(y.action=a[17]),l.$set(y)},i(d){u||(F(l.$$.fragment,d),u=!0)},o(d){P(l.$$.fragment,d),u=!1},d(d){d&&v(e),Y(l),_=!1,Z(I)}}}function ze(a){let e,t;return e=new Ee({props:{onAddAction:a[8],onCancel:a[9],action:a[17]}}),{c(){Q(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,r){X(e,l,r),t=!0},p(l,r){const i={};r&1&&(i.action=l[17]),e.$set(i)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){Y(e,l)}}}function Te(a,e){let t,l,r,i;const c=[ze,Re],o=[];function n(s,g){return s[2]&&s[2].id===s[17].id?0:1}return l=n(e),r=o[l]=c[l](e),{key:a,first:null,c(){t=k("div"),r.c(),this.h()},l(s){t=E(s,"DIV",{class:!0});var g=C(t);r.l(g),g.forEach(v),this.h()},h(){A(t,"class","box"),this.first=t},m(s,g){H(s,t,g),o[l].m(t,null),i=!0},p(s,g){e=s;let u=l;l=n(e),l===u?o[l].p(e,g):($(),P(o[u],1,1,()=>{o[u]=null}),ee(),r=o[l],r?r.p(e,g):(r=o[l]=c[l](e),r.c()),F(r,1),r.m(t,null))},i(s){i||(F(r),i=!0)},o(s){P(r),i=!1},d(s){s&&v(t),o[l].d()}}}function Pe(a){let e,t,l,r,i;return{c(){e=k("div"),t=k("div"),l=R("+"),this.h()},l(c){e=E(c,"DIV",{class:!0});var o=C(e);t=E(o,"DIV",{class:!0});var n=C(t);l=z(n,"+"),n.forEach(v),o.forEach(v),this.h()},h(){A(t,"class","has-text-grey"),A(e,"class","box is-outlined is-secondary button")},m(c,o){H(c,e,o),h(e,t),h(t,l),r||(i=[L(e,"click",a[5]),L(e,"keydown",a[7])],r=!0)},p:J,i:J,o:J,d(c){c&&v(e),r=!1,Z(i)}}}function Fe(a){let e,t;return e=new Ee({props:{onAddAction:a[3],onCancel:a[6]}}),{c(){Q(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,r){X(e,l,r),t=!0},p:J,i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){Y(e,l)}}}function He(a){let e,t,l,r,i=[],c=new Map,o,n,s,g,u=a[0];const _=d=>d[17];for(let d=0;d<u.length;d+=1){let b=ve(a,u,d),y=_(b);c.set(y,i[d]=Te(y,b))}const I=[Fe,Pe],m=[];function V(d,b){return d[1]?0:1}return n=V(a),s=m[n]=I[n](a),{c(){e=k("div"),t=k("label"),l=R("Actions"),r=w();for(let d=0;d<i.length;d+=1)i[d].c();o=w(),s.c(),this.h()},l(d){e=E(d,"DIV",{});var b=C(e);t=E(b,"LABEL",{class:!0});var y=C(t);l=z(y,"Actions"),y.forEach(v),r=O(b);for(let T=0;T<i.length;T+=1)i[T].l(b);o=O(b),s.l(b),b.forEach(v),this.h()},h(){A(t,"class","label is-medium")},m(d,b){H(d,e,b),h(e,t),h(t,l),h(e,r);for(let y=0;y<i.length;y+=1)i[y]&&i[y].m(e,null);h(e,o),m[n].m(e,null),g=!0},p(d,[b]){b&1813&&(u=d[0],$(),i=pe(i,b,_,1,d,u,c,e,ye,Te,o,ve),ee());let y=n;n=V(d),n===y?m[n].p(d,b):($(),P(m[y],1,1,()=>{m[y]=null}),ee(),s=m[n],s?s.p(d,b):(s=m[n]=I[n](d),s.c()),F(s,1),s.m(e,null))},i(d){if(!g){for(let b=0;b<u.length;b+=1)F(i[b]);F(s),g=!0}},o(d){for(let b=0;b<i.length;b+=1)P(i[b]);P(s),g=!1},d(d){d&&v(e);for(let b=0;b<i.length;b+=1)i[b].d();m[n].d()}}}function qe(a,e,t){let{onAddAction:l=()=>null}=e,{onEditAction:r=()=>null}=e,{onRemoveAction:i=()=>null}=e,{actions:c=[]}=e;function o(f){l(f),u()}function n(f){i(f)}let s=!1;function g(){t(1,s=!0)}function u(){t(1,s=!1),m&&t(2,m=!1)}function _(){u()}function I(f){f.key==="Enter"&&g()}let m=null;function V(f){r(f),t(2,m=null)}function d(){t(2,m=null)}function b(f){t(2,m=f)}const y=f=>b(f),T=f=>n(f);return a.$$set=f=>{"onAddAction"in f&&t(11,l=f.onAddAction),"onEditAction"in f&&t(12,r=f.onEditAction),"onRemoveAction"in f&&t(13,i=f.onRemoveAction),"actions"in f&&t(0,c=f.actions)},[c,s,m,o,n,g,_,I,V,d,b,l,r,i,y,T]}class je extends te{constructor(e){super(),le(this,e,qe,He,ne,{onAddAction:11,onEditAction:12,onRemoveAction:13,actions:0})}}export{je as A,we as T,me as a};
