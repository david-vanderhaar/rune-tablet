import{S as Qe,i as Ye,s as Je,k as d,q as U,a as V,l as h,m as v,r as O,h as f,c as S,n as m,p as Te,b as _e,D as t,u as re,v as Ze,M as Ce,f as $e,g as le,d as se,N as et,e as Ae,y as ue,z as de,A as he,B as ge,O as tt,P as fe,E as De,K as at,L as je,Q as nt,w as lt}from"../chunks/index.5a21e692.js";import{A as st,e as rt,T as it,a as ot,b as ct,C as ft,h as ut}from"../chunks/CardTemplateSelector.e809f6f6.js";import{f as Fe}from"../chunks/index.bdac4a1c.js";function Me(a,n,e){const l=a.slice();return l[9]=n[e],l}function Ne(a,n,e){const l=a.slice();return l[12]=n[e],l}function Ue(a){let n,e,l=a[2].join(", ")+"",u;return{c(){n=d("p"),e=U("Range: "),u=U(l)},l(s){n=h(s,"P",{});var o=v(n);e=O(o,"Range: "),u=O(o,l),o.forEach(f)},m(s,o){_e(s,n,o),t(n,e),t(n,u)},p(s,o){o&4&&l!==(l=s[2].join(", ")+"")&&re(u,l)},d(s){s&&f(n)}}}function Oe(a,n){let e,l,u;return l=new st({props:{action:n[12]}}),{key:a,first:null,c(){e=Ae(),ue(l.$$.fragment),this.h()},l(s){e=Ae(),de(l.$$.fragment,s),this.h()},h(){this.first=e},m(s,o){_e(s,e,o),he(l,s,o),u=!0},p(s,o){n=s;const T={};o&32&&(T.action=n[12]),l.$set(T)},i(s){u||(le(l.$$.fragment,s),u=!0)},o(s){se(l.$$.fragment,s),u=!1},d(s){s&&f(e),ge(l,s)}}}function Ge(a){let n,e,l=a[9]+"",u,s,o=a[7][a[9]]+"",T;return{c(){n=d("p"),e=d("em"),u=U(l),s=U(": "),T=U(o)},l(E){n=h(E,"P",{});var b=v(n);e=h(b,"EM",{});var I=v(e);u=O(I,l),I.forEach(f),s=O(b,": "),T=O(b,o),b.forEach(f)},m(E,b){_e(E,n,b),t(n,e),t(e,u),t(n,s),t(n,T)},p(E,b){b&64&&l!==(l=E[9]+"")&&re(u,l),b&64&&o!==(o=E[7][E[9]]+"")&&re(T,o)},d(E){E&&f(n)}}}function We(a){let n,e=a[7][a[9]]&&Ge(a);return{c(){e&&e.c(),n=Ae()},l(l){e&&e.l(l),n=Ae()},m(l,u){e&&e.m(l,u),_e(l,n,u)},p(l,u){l[7][l[9]]?e?e.p(l,u):(e=Ge(l),e.c(),e.m(n.parentNode,n)):e&&(e.d(1),e=null)},d(l){e&&e.d(l),l&&f(n)}}}function dt(a){let n,e,l,u,s,o,T,E=a[1].join(", ")+"",b,I,k,D,L,H,p=[],$=new Map,q,y,G,Z,j,F,Q,C,M,i,P,x=a[2].length>0&&Ue(a),W=a[5];const ie=r=>r[12];for(let r=0;r<W.length;r+=1){let g=Ne(a,W,r),c=ie(g);$.set(c,p[r]=Oe(c,g))}let Y=a[6],A=[];for(let r=0;r<Y.length;r+=1)A[r]=We(Me(a,Y,r));return{c(){n=d("div"),e=d("div"),l=d("p"),u=U(a[0]),s=V(),o=d("div"),T=d("p"),b=U(E),I=V(),x&&x.c(),k=V(),D=d("hr"),L=V(),H=d("div");for(let r=0;r<p.length;r+=1)p[r].c();q=V(),y=d("div"),G=d("hr"),Z=V();for(let r=0;r<A.length;r+=1)A[r].c();j=V(),F=d("p"),Q=U(a[4]),C=V(),M=d("p"),i=U(a[3]),this.h()},l(r){n=h(r,"DIV",{class:!0});var g=v(n);e=h(g,"DIV",{class:!0,style:!0});var c=v(e);l=h(c,"P",{class:!0});var B=v(l);u=O(B,a[0]),B.forEach(f),s=S(c),o=h(c,"DIV",{class:!0});var N=v(o);T=h(N,"P",{});var oe=v(T);b=O(oe,E),oe.forEach(f),I=S(N),x&&x.l(N),N.forEach(f),k=S(c),D=h(c,"HR",{}),L=S(c),H=h(c,"DIV",{class:!0});var ee=v(H);for(let K=0;K<p.length;K+=1)p[K].l(ee);q=S(ee),y=h(ee,"DIV",{class:!0,style:!0});var z=v(y);G=h(z,"HR",{}),Z=S(z);for(let K=0;K<A.length;K+=1)A[K].l(z);j=S(z),F=h(z,"P",{class:!0});var X=v(F);Q=O(X,a[4]),X.forEach(f),C=S(z),M=h(z,"P",{class:!0});var J=v(M);i=O(J,a[3]),J.forEach(f),z.forEach(f),ee.forEach(f),c.forEach(f),g.forEach(f),this.h()},h(){m(l,"class","title"),m(o,"class","is-size-6 subtitle"),m(F,"class","has-text-centered"),m(M,"class","has-text-grey is-italic has-text-centered"),m(y,"class","bottom-content svelte-gmcenr"),Te(y,"background-color","white"),m(H,"class","content"),m(e,"class","card-content has-text-centered pb-0 svelte-gmcenr"),Te(e,"background-color","white"),m(n,"class","card equipment-card svelte-gmcenr")},m(r,g){_e(r,n,g),t(n,e),t(e,l),t(l,u),t(e,s),t(e,o),t(o,T),t(T,b),t(o,I),x&&x.m(o,null),t(e,k),t(e,D),t(e,L),t(e,H);for(let c=0;c<p.length;c+=1)p[c]&&p[c].m(H,null);t(H,q),t(H,y),t(y,G),t(y,Z);for(let c=0;c<A.length;c+=1)A[c]&&A[c].m(y,null);t(y,j),t(y,F),t(F,Q),t(y,C),t(y,M),t(M,i),P=!0},p(r,[g]){if((!P||g&1)&&re(u,r[0]),(!P||g&2)&&E!==(E=r[1].join(", ")+"")&&re(b,E),r[2].length>0?x?x.p(r,g):(x=Ue(r),x.c(),x.m(o,null)):x&&(x.d(1),x=null),g&32&&(W=r[5],Ze(),p=Ce(p,g,ie,1,r,W,$,H,tt,Oe,q,Ne),$e()),g&192){Y=r[6];let c;for(c=0;c<Y.length;c+=1){const B=Me(r,Y,c);A[c]?A[c].p(B,g):(A[c]=We(B),A[c].c(),A[c].m(y,j))}for(;c<A.length;c+=1)A[c].d(1);A.length=Y.length}(!P||g&16)&&re(Q,r[4]),(!P||g&8)&&re(i,r[3])},i(r){if(!P){for(let g=0;g<W.length;g+=1)le(p[g]);P=!0}},o(r){for(let g=0;g<p.length;g+=1)se(p[g]);P=!1},d(r){r&&f(n),x&&x.d();for(let g=0;g<p.length;g+=1)p[g].d();et(A,r)}}}function ht(a,n,e){let{title:l=""}=n,{itemTags:u=[]}=n,{range:s=[]}=n,{flavorText:o=""}=n,{extraText:T=""}=n,{actions:E=[]}=n;const b=rt.getExtraEffects();let I=[];function k(){let D=E.reduce((L,H)=>[...L,...H.extraEffects],[]);e(6,I=[...new Set(D)])}return a.$$set=D=>{"title"in D&&e(0,l=D.title),"itemTags"in D&&e(1,u=D.itemTags),"range"in D&&e(2,s=D.range),"flavorText"in D&&e(3,o=D.flavorText),"extraText"in D&&e(4,T=D.extraText),"actions"in D&&e(5,E=D.actions)},a.$$.update=()=>{a.$$.dirty&32&&k()},[l,u,s,o,T,E,I,b]}class gt extends Qe{constructor(n){super(),Ye(this,n,ht,dt,Je,{title:0,itemTags:1,range:2,flavorText:3,extraText:4,actions:5})}}const _t=[{title:"Long Sword",itemTags:["Weapon","Sword"],range:["Same"],flavorText:"A balanced obsidian blade. Said to hold the power to cut Fate itself",extraText:"",actions:[{id:1,triggers:[2],actionEffect:"Harm 1",extraEffects:[]},{id:2,triggers:[3,4,5],actionEffect:"Move 1, Harm 2",extraEffects:[]},{id:3,triggers:[6],actionEffect:"Move 1, Harm 3",extraEffects:[]}]},{title:"Boarded Shield",itemTags:["Weapon","Shield"],flavorText:"An instrument to ward off death, even if for a moment.",extraText:"",actions:[{id:1,triggers:[3,4],actionEffect:"Block 1",extraEffects:[]},{id:2,triggers:[5,6],actionEffect:"Move 1, Block 1",extraEffects:[]}]},{title:"Erupting Flame",itemTags:["Weapon","Spell"],flavorText:"The fires that burned Osel Alora to the ground sit warmly in your palm.",extraText:"",actions:[{id:1,triggers:[4],actionEffect:"Deal 2 Harm to all same and adjacent.",extraEffects:[]},{id:2,triggers:[5],actionEffect:"Deal 2 Harm to all in your row or column",extraEffects:[]},{id:3,triggers:[6],actionEffect:"Deal 5 Harm to same or adjacent enemy. Take 2 Harm",extraEffects:[]}]},{title:"Amulet of Dawn",itemTags:["Gear"],flavorText:"A fire that can warm even those whose fate has been taken from them.",extraText:"",actions:[{id:1,triggers:[],actionEffect:"Criteria: Pair of dice values.",extraEffects:[]},{id:2,triggers:[],actionEffect:"Effect: Heal 2 Harm at the end of this round.",extraEffects:[]}]},{title:"Fate's Fury",itemTags:["Rune"],flavorText:"Their ruthlessness was passed down to you, a god's fury.",extraText:"",actions:[{id:1,triggers:[],actionEffect:"You may reroll any 1's in a fight. If you do, lose 2 Health.",extraEffects:[]}]}];function vt(a){let n,e,l,u,s,o,T,E,b,I,k,D,L,H,p,$,q,y,G,Z,j,F,Q,C,M,i,P,x,W,ie,Y,A,r,g,c,B,N,oe,ee,z,X,J,K,ne,we,te,ve,Ie,Ve;return L=new it({props:{placeholder:"Axe",tags:a[2],onTagsChange:a[11]}}),p=new ot({props:{label:"Range",availableTags:Object.values(a[12]),selectedTags:a[3],onTagsChange:a[15]}}),q=new ct({props:{actions:a[0],onAddAction:a[8],onRemoveAction:a[10],onEditAction:a[9]}}),N=new gt({props:{title:a[1],itemTags:a[2],range:a[3],flavorText:a[4],extraText:a[5],actions:a[0]}}),J=new ft({props:{onSelect:a[7],templateCards:_t}}),{c(){n=d("section"),e=d("div"),l=d("div"),u=d("div"),s=d("div"),o=d("div"),T=d("label"),E=U("Title"),b=V(),I=d("div"),k=d("input"),D=V(),ue(L.$$.fragment),H=V(),ue(p.$$.fragment),$=V(),ue(q.$$.fragment),y=V(),G=d("br"),Z=V(),j=d("div"),F=d("label"),Q=U("Extra Text"),C=V(),M=d("div"),i=d("textarea"),P=V(),x=d("div"),W=d("label"),ie=U("Flavor Text"),Y=V(),A=d("div"),r=d("textarea"),g=V(),c=d("div"),B=d("div"),ue(N.$$.fragment),oe=V(),ee=d("br"),z=V(),X=d("div"),ue(J.$$.fragment),K=V(),ne=d("button"),we=U("Export as PNG"),this.h()},l(_){n=h(_,"SECTION",{});var R=v(n);e=h(R,"DIV",{class:!0});var me=v(e);l=h(me,"DIV",{class:!0});var ae=v(l);u=h(ae,"DIV",{class:!0});var Ee=v(u);s=h(Ee,"DIV",{});var w=v(s);o=h(w,"DIV",{class:!0});var pe=v(o);T=h(pe,"LABEL",{class:!0});var Se=v(T);E=O(Se,"Title"),Se.forEach(f),b=S(pe),I=h(pe,"DIV",{class:!0});var ye=v(I);k=h(ye,"INPUT",{class:!0,type:!0,placeholder:!0}),ye.forEach(f),pe.forEach(f),D=S(w),de(L.$$.fragment,w),H=S(w),de(p.$$.fragment,w),$=S(w),de(q.$$.fragment,w),y=S(w),G=h(w,"BR",{}),Z=S(w),j=h(w,"DIV",{class:!0});var be=v(j);F=h(be,"LABEL",{class:!0});var Pe=v(F);Q=O(Pe,"Extra Text"),Pe.forEach(f),C=S(be),M=h(be,"DIV",{class:!0});var Re=v(M);i=h(Re,"TEXTAREA",{class:!0,placeholder:!0}),v(i).forEach(f),Re.forEach(f),be.forEach(f),P=S(w),x=h(w,"DIV",{class:!0});var ke=v(x);W=h(ke,"LABEL",{class:!0});var He=v(W);ie=O(He,"Flavor Text"),He.forEach(f),Y=S(ke),A=h(ke,"DIV",{class:!0});var Le=v(A);r=h(Le,"TEXTAREA",{class:!0,placeholder:!0}),v(r).forEach(f),Le.forEach(f),ke.forEach(f),w.forEach(f),Ee.forEach(f),g=S(ae),c=h(ae,"DIV",{class:!0});var ce=v(c);B=h(ce,"DIV",{style:!0,id:!0});var qe=v(B);de(N.$$.fragment,qe),qe.forEach(f),oe=S(ce),ee=h(ce,"BR",{}),z=S(ce),X=h(ce,"DIV",{class:!0});var xe=v(X);de(J.$$.fragment,xe),K=S(xe),ne=h(xe,"BUTTON",{class:!0});var Be=v(ne);we=O(Be,"Export as PNG"),Be.forEach(f),xe.forEach(f),ce.forEach(f),ae.forEach(f),me.forEach(f),R.forEach(f),this.h()},h(){m(T,"class","label"),m(k,"class","input"),m(k,"type","text"),m(k,"placeholder","Card Title"),m(I,"class","control"),m(o,"class","field"),m(F,"class","label"),m(i,"class","textarea"),m(i,"placeholder","Enter any extra text"),m(M,"class","control"),m(j,"class","field"),m(W,"class","label"),m(r,"class","textarea"),m(r,"placeholder","Enter flavor text"),m(A,"class","control"),m(x,"class","field"),m(u,"class","column is-half"),Te(B,"width","400px"),Te(B,"height","600px"),Te(B,"max-width","100%"),m(B,"id","export-card"),m(ne,"class","button is-dark ml-2"),m(X,"class","field is-grouped"),m(c,"class","column is-half"),m(l,"class","columns"),m(e,"class","container")},m(_,R){_e(_,n,R),t(n,e),t(e,l),t(l,u),t(u,s),t(s,o),t(o,T),t(T,E),t(o,b),t(o,I),t(I,k),fe(k,a[1]),t(s,D),he(L,s,null),t(s,H),he(p,s,null),t(s,$),he(q,s,null),t(s,y),t(s,G),t(s,Z),t(s,j),t(j,F),t(F,Q),t(j,C),t(j,M),t(M,i),fe(i,a[5]),t(s,P),t(s,x),t(x,W),t(W,ie),t(x,Y),t(x,A),t(A,r),fe(r,a[4]),t(l,g),t(l,c),t(c,B),he(N,B,null),a[18](B),t(c,oe),t(c,ee),t(c,z),t(c,X),he(J,X,null),t(X,K),t(X,ne),t(ne,we),ve=!0,Ie||(Ve=[De(k,"input",a[14]),De(i,"input",a[16]),De(r,"input",a[17]),De(ne,"click",a[13])],Ie=!0)},p(_,[R]){R&2&&k.value!==_[1]&&fe(k,_[1]);const me={};R&4&&(me.tags=_[2]),L.$set(me);const ae={};R&8&&(ae.selectedTags=_[3]),R&8&&(ae.onTagsChange=_[15]),p.$set(ae);const Ee={};R&1&&(Ee.actions=_[0]),q.$set(Ee),R&32&&fe(i,_[5]),R&16&&fe(r,_[4]);const w={};R&2&&(w.title=_[1]),R&4&&(w.itemTags=_[2]),R&8&&(w.range=_[3]),R&16&&(w.flavorText=_[4]),R&32&&(w.extraText=_[5]),R&1&&(w.actions=_[0]),N.$set(w)},i(_){ve||(le(L.$$.fragment,_),le(p.$$.fragment,_),le(q.$$.fragment,_),le(N.$$.fragment,_),le(J.$$.fragment,_),at(()=>{ve&&(te||(te=je(n,Fe,{},!0)),te.run(1))}),ve=!0)},o(_){se(L.$$.fragment,_),se(p.$$.fragment,_),se(q.$$.fragment,_),se(N.$$.fragment,_),se(J.$$.fragment,_),te||(te=je(n,Fe,{},!1)),te.run(0),ve=!1},d(_){_&&f(n),ge(L),ge(p),ge(q),ge(N),a[18](null),ge(J),_&&te&&te.end(),Ie=!1,nt(Ve)}}}const ze="",Xe="",Ke="";function mt(a){const n=document.createElement("a");n.href=a,n.download="rune_card.png",n.click()}function Et(a,n,e){const l=[],u=[],s=[];let o=ze,T=l,E=u,b=Xe,I=Ke,k=s;function D(i){e(1,o=(i==null?void 0:i.title)||ze),e(2,T=(i==null?void 0:i.itemTags)||l),e(3,E=(i==null?void 0:i.range)||u),e(4,b=(i==null?void 0:i.flavorText)||Xe),e(5,I=(i==null?void 0:i.extraText)||Ke),e(0,k=(i==null?void 0:i.actions)||s)}function L(i){e(0,k=[...k,i])}function H(i){e(0,k=k.map(P=>P.id===i.id?i:P))}function p(i){e(0,k=k.filter(P=>P.id!==i.id))}function $(i){e(2,T=i)}const q={0:"Same",1:"Adjacent",2:"2",3:"3"};function y(){q[E]}let G;function Z(){ut(G).then(i=>{const P=i.toDataURL("image/png");mt(P)})}function j(){o=this.value,e(1,o)}const F=i=>e(3,E=i);function Q(){I=this.value,e(5,I)}function C(){b=this.value,e(4,b)}function M(i){lt[i?"unshift":"push"](()=>{G=i,e(6,G)})}return a.$$.update=()=>{a.$$.dirty&1&&y()},[k,o,T,E,b,I,G,D,L,H,p,$,q,Z,j,F,Q,C,M]}class kt extends Qe{constructor(n){super(),Ye(this,n,Et,vt,Je,{})}}export{kt as component};
