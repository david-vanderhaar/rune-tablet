import{S as kt,i as Vt,s as At,k as i,q as H,a as I,l as r,m as u,r as q,h as o,c as k,n as h,p as Oe,b as ye,D as e,u as pe,v as St,M as wt,N as Pt,f as Lt,g as ke,d as Ve,O as Nt,e as Xe,y as Ne,z as Re,A as Be,B as je,P as he,E as Ie,K as Rt,L as ct,Q as Bt,J as jt,w as yt}from"../chunks/index.bb4c9b91.js";import{T as Ut,a as Ht,A as qt,C as Ot,h as zt}from"../chunks/CardTemplateSelector.cac7de25.js";import{f as ft}from"../chunks/index.9d76f19c.js";import{A as Mt,e as Ft}from"../chunks/PersistentStore.833f8a9a.js";import{b as ut}from"../chunks/Resizable.svelte_svelte_type_style_lang.ecf60e11.js";function ht(l,a,t){const s=l.slice();return s[11]=a[t],s}function dt(l,a,t){const s=l.slice();return s[14]=a[t],s}function vt(l){let a,t,s=l[4].join(", ")+"",_;return{c(){a=i("p"),t=H("Range: "),_=H(s)},l(n){a=r(n,"P",{});var g=u(a);t=q(g,"Range: "),_=q(g,s),g.forEach(o)},m(n,g){ye(n,a,g),e(a,t),e(a,_)},p(n,g){g&16&&s!==(s=n[4].join(", ")+"")&&pe(_,s)},d(n){n&&o(a)}}}function _t(l,a){let t,s,_;return s=new Mt({props:{action:a[14],stacked:!0}}),{key:l,first:null,c(){t=Xe(),Ne(s.$$.fragment),this.h()},l(n){t=Xe(),Re(s.$$.fragment,n),this.h()},h(){this.first=t},m(n,g){ye(n,t,g),Be(s,n,g),_=!0},p(n,g){a=n;const m={};g&128&&(m.action=a[14]),s.$set(m)},i(n){_||(ke(s.$$.fragment,n),_=!0)},o(n){Ve(s.$$.fragment,n),_=!1},d(n){n&&o(t),je(s,n)}}}function gt(l){let a,t,s=l[11]+"",_,n,g=l[9][l[11]]+"",m;return{c(){a=i("p"),t=i("em"),_=H(s),n=H(": "),m=H(g)},l(p){a=r(p,"P",{});var T=u(a);t=r(T,"EM",{});var S=u(t);_=q(S,s),S.forEach(o),n=q(T,": "),m=q(T,g),T.forEach(o)},m(p,T){ye(p,a,T),e(a,t),e(t,_),e(a,n),e(a,m)},p(p,T){T&256&&s!==(s=p[11]+"")&&pe(_,s),T&256&&g!==(g=p[9][p[11]]+"")&&pe(m,g)},d(p){p&&o(a)}}}function Et(l){let a,t=l[9][l[11]]&&gt(l);return{c(){t&&t.c(),a=Xe()},l(s){t&&t.l(s),a=Xe()},m(s,_){t&&t.m(s,_),ye(s,a,_)},p(s,_){s[9][s[11]]?t?t.p(s,_):(t=gt(s),t.c(),t.m(a.parentNode,a)):t&&(t.d(1),t=null)},d(s){t&&t.d(s),s&&o(a)}}}function Gt(l){let a,t,s,_,n,g,m,p,T=mt(l[1],l[2])+"",S,P,j,L=(l[3]&&l[3].join(", "))+"",d,se,ne,C,z,G,B,A=[],ge=new Map,$,y,M,de,N,ee,X,ie,U,c,J,ve,F,re,Q,R=l[4]&&l[4].length>0&&vt(l),te=l[7];const le=f=>f[14];for(let f=0;f<te.length;f+=1){let b=dt(l,te,f),E=le(b);ge.set(E,A[f]=_t(E,b))}let oe=l[8],V=[];for(let f=0;f<oe.length;f+=1)V[f]=Et(ht(l,oe,f));return{c(){a=i("div"),t=i("div"),s=i("div"),_=i("p"),n=H(l[0]),g=I(),m=i("div"),p=i("p"),S=H(T),P=I(),j=i("p"),d=H(L),se=I(),R&&R.c(),ne=I(),C=i("hr"),z=I(),G=i("div"),B=i("div");for(let f=0;f<A.length;f+=1)A[f].c();$=I(),y=i("div"),M=i("hr"),de=I(),N=i("div"),ee=i("div");for(let f=0;f<V.length;f+=1)V[f].c();X=I(),ie=i("div"),U=i("p"),c=H(l[6]),J=I(),ve=i("div"),F=i("p"),re=H(l[5]),this.h()},l(f){a=r(f,"DIV",{class:!0});var b=u(a);t=r(b,"DIV",{class:!0,style:!0});var E=u(t);s=r(E,"DIV",{class:!0});var K=u(s);_=r(K,"P",{class:!0});var ae=u(_);n=q(ae,l[0]),ae.forEach(o),g=k(K),m=r(K,"DIV",{class:!0});var ce=u(m);p=r(ce,"P",{});var W=u(p);S=q(W,T),W.forEach(o),P=k(ce),j=r(ce,"P",{});var Y=u(j);d=q(Y,L),Y.forEach(o),se=k(ce),R&&R.l(ce),ce.forEach(o),K.forEach(o),ne=k(E),C=r(E,"HR",{}),z=k(E),G=r(E,"DIV",{class:!0});var Z=u(G);B=r(Z,"DIV",{class:!0});var Ae=u(B);for(let O=0;O<A.length;O+=1)A[O].l(Ae);Ae.forEach(o),$=k(Z),y=r(Z,"DIV",{class:!0,style:!0});var Ee=u(y);M=r(Ee,"HR",{}),de=k(Ee),N=r(Ee,"DIV",{class:!0});var fe=u(N);ee=r(fe,"DIV",{});var _e=u(ee);for(let O=0;O<V.length;O+=1)V[O].l(_e);_e.forEach(o),X=k(fe),ie=r(fe,"DIV",{});var x=u(ie);U=r(x,"P",{class:!0});var ue=u(U);c=q(ue,l[6]),ue.forEach(o),x.forEach(o),J=k(fe),ve=r(fe,"DIV",{});var Se=u(ve);F=r(Se,"P",{class:!0});var we=u(F);re=q(we,l[5]),we.forEach(o),Se.forEach(o),fe.forEach(o),Ee.forEach(o),Z.forEach(o),E.forEach(o),b.forEach(o),this.h()},h(){h(_,"class","title"),h(m,"class","is-size-6 has-text-left"),h(s,"class","is-flex is-justify-content-space-between"),h(B,"class","is-flex is-justify-content-space-around"),h(U,"class","has-text-centered"),h(F,"class","has-text-grey is-italic has-text-centered"),h(N,"class","is-flex is-justify-content-space-around"),h(y,"class","bottom-content svelte-1d4zbmt"),Oe(y,"background-color","white"),h(G,"class","content"),h(t,"class","card-content pb-0"),Oe(t,"background-color","white"),h(a,"class","card display-card svelte-1d4zbmt")},m(f,b){ye(f,a,b),e(a,t),e(t,s),e(s,_),e(_,n),e(s,g),e(s,m),e(m,p),e(p,S),e(m,P),e(m,j),e(j,d),e(m,se),R&&R.m(m,null),e(t,ne),e(t,C),e(t,z),e(t,G),e(G,B);for(let E=0;E<A.length;E+=1)A[E]&&A[E].m(B,null);e(G,$),e(G,y),e(y,M),e(y,de),e(y,N),e(N,ee);for(let E=0;E<V.length;E+=1)V[E]&&V[E].m(ee,null);e(N,X),e(N,ie),e(ie,U),e(U,c),e(N,J),e(N,ve),e(ve,F),e(F,re),Q=!0},p(f,[b]){if((!Q||b&1)&&pe(n,f[0]),(!Q||b&6)&&T!==(T=mt(f[1],f[2])+"")&&pe(S,T),(!Q||b&8)&&L!==(L=(f[3]&&f[3].join(", "))+"")&&pe(d,L),f[4]&&f[4].length>0?R?R.p(f,b):(R=vt(f),R.c(),R.m(m,null)):R&&(R.d(1),R=null),b&128&&(te=f[7],St(),A=wt(A,b,le,1,f,te,ge,B,Pt,_t,null,dt),Lt()),b&768){oe=f[8];let E;for(E=0;E<oe.length;E+=1){const K=ht(f,oe,E);V[E]?V[E].p(K,b):(V[E]=Et(K),V[E].c(),V[E].m(ee,null))}for(;E<V.length;E+=1)V[E].d(1);V.length=oe.length}(!Q||b&64)&&pe(c,f[6]),(!Q||b&32)&&pe(re,f[5])},i(f){if(!Q){for(let b=0;b<te.length;b+=1)ke(A[b]);Q=!0}},o(f){for(let b=0;b<A.length;b+=1)Ve(A[b]);Q=!1},d(f){f&&o(a),R&&R.d();for(let b=0;b<A.length;b+=1)A[b].d();Nt(V,f)}}}function mt(l,a){const t=[];return l&&l.length>0&&t.push(`Health: ${l}`),a&&a.length>0&&t.push(`Stamina: ${a}`),t.join(", ")}function Xt(l,a,t){let{title:s=""}=a,{health:_=""}=a,{stamina:n=""}=a,{itemTags:g=[]}=a,{range:m=[]}=a,{flavorText:p=""}=a,{extraText:T=""}=a,{actions:S=[]}=a;const P=Ft.getExtraEffects();let j=[];function L(){let d=S.reduce((se,ne)=>[...se,...ne.extraEffects],[]);t(8,j=[...new Set(d)])}return l.$$set=d=>{"title"in d&&t(0,s=d.title),"health"in d&&t(1,_=d.health),"stamina"in d&&t(2,n=d.stamina),"itemTags"in d&&t(3,g=d.itemTags),"range"in d&&t(4,m=d.range),"flavorText"in d&&t(5,p=d.flavorText),"extraText"in d&&t(6,T=d.extraText),"actions"in d&&t(7,S=d.actions)},l.$$.update=()=>{l.$$.dirty&128&&L()},[s,_,n,g,m,p,T,S,j,P]}class Jt extends kt{constructor(a){super(),Vt(this,a,Xt,Gt,At,{title:0,health:1,stamina:2,itemTags:3,range:4,flavorText:5,extraText:6,actions:7})}}function Kt(l){let a,t,s,_,n,g,m,p,T,S,P,j,L,d,se,ne,C,z,G,B,A,ge,$,y,M,de,N,ee,X,ie,U,c,J,ve,F,re,Q,R,te,le,oe,V,f,b,E,K,ae,ce,W,Y,Z,Ae,Ee,fe,_e,x,ue,Se,we,O,Je,Te,Ke,me,Ue,Qe,We;return N=new Ut({props:{placeholder:"Undead",tags:l[4],onTagsChange:l[14]}}),X=new Ht({props:{label:"Range",availableTags:Object.values(l[15]),selectedTags:l[5],onTagsChange:l[21]}}),U=new qt({props:{actions:l[0],onAddAction:l[11],onRemoveAction:l[13],onEditAction:l[12]}}),Z=new Jt({props:{title:l[1],itemTags:l[4],range:l[5],flavorText:l[6],extraText:l[7],actions:l[0],health:l[2],stamina:l[3]}}),O=new Ot({props:{onSelect:l[10],templateCards:l[9]}}),{c(){a=i("section"),t=i("div"),s=i("div"),_=i("div"),n=i("div"),g=i("div"),m=i("label"),p=H("Name"),T=I(),S=i("div"),P=i("input"),j=I(),L=i("div"),d=i("label"),se=H("Health"),ne=I(),C=i("div"),z=i("input"),G=I(),B=i("div"),A=i("label"),ge=H("Stamina"),$=I(),y=i("div"),M=i("input"),de=I(),Ne(N.$$.fragment),ee=I(),Ne(X.$$.fragment),ie=I(),Ne(U.$$.fragment),c=I(),J=i("br"),ve=I(),F=i("div"),re=i("label"),Q=H("Extra Text"),R=I(),te=i("div"),le=i("textarea"),oe=I(),V=i("div"),f=i("label"),b=H("Flavor Text"),E=I(),K=i("div"),ae=i("textarea"),ce=I(),W=i("div"),Y=i("div"),Ne(Z.$$.fragment),Ae=I(),Ee=i("br"),fe=I(),_e=i("div"),x=i("div"),ue=i("button"),Se=H("Save Card"),we=I(),Ne(O.$$.fragment),Je=I(),Te=i("button"),Ke=H("Export as PNG"),this.h()},l(v){a=r(v,"SECTION",{});var w=u(a);t=r(w,"DIV",{class:!0});var He=u(t);s=r(He,"DIV",{class:!0});var be=u(s);_=r(be,"DIV",{class:!0});var qe=u(_);n=r(qe,"DIV",{});var D=u(n);g=r(D,"DIV",{class:!0});var De=u(g);m=r(De,"LABEL",{class:!0});var Ye=u(m);p=q(Ye,"Name"),Ye.forEach(o),T=k(De),S=r(De,"DIV",{class:!0});var Ze=u(S);P=r(Ze,"INPUT",{class:!0,type:!0,placeholder:!0}),Ze.forEach(o),De.forEach(o),j=k(D),L=r(D,"DIV",{class:!0});var ze=u(L);d=r(ze,"LABEL",{class:!0});var xe=u(d);se=q(xe,"Health"),xe.forEach(o),ne=k(ze),C=r(ze,"DIV",{class:!0});var Ce=u(C);z=r(Ce,"INPUT",{class:!0,placeholder:!0}),Ce.forEach(o),ze.forEach(o),G=k(D),B=r(D,"DIV",{class:!0});var Me=u(B);A=r(Me,"LABEL",{class:!0});var $e=u(A);ge=q($e,"Stamina"),$e.forEach(o),$=k(Me),y=r(Me,"DIV",{class:!0});var et=u(y);M=r(et,"INPUT",{class:!0,placeholder:!0}),et.forEach(o),Me.forEach(o),de=k(D),Re(N.$$.fragment,D),ee=k(D),Re(X.$$.fragment,D),ie=k(D),Re(U.$$.fragment,D),c=k(D),J=r(D,"BR",{}),ve=k(D),F=r(D,"DIV",{class:!0});var Fe=u(F);re=r(Fe,"LABEL",{class:!0});var tt=u(re);Q=q(tt,"Extra Text"),tt.forEach(o),R=k(Fe),te=r(Fe,"DIV",{class:!0});var lt=u(te);le=r(lt,"TEXTAREA",{class:!0,placeholder:!0}),u(le).forEach(o),lt.forEach(o),Fe.forEach(o),oe=k(D),V=r(D,"DIV",{class:!0});var Ge=u(V);f=r(Ge,"LABEL",{class:!0});var at=u(f);b=q(at,"Flavor Text"),at.forEach(o),E=k(Ge),K=r(Ge,"DIV",{class:!0});var st=u(K);ae=r(st,"TEXTAREA",{class:!0,placeholder:!0}),u(ae).forEach(o),st.forEach(o),Ge.forEach(o),D.forEach(o),qe.forEach(o),ce=k(be),W=r(be,"DIV",{class:!0});var Pe=u(W);Y=r(Pe,"DIV",{style:!0,id:!0});var nt=u(Y);Re(Z.$$.fragment,nt),nt.forEach(o),Ae=k(Pe),Ee=r(Pe,"BR",{}),fe=k(Pe),_e=r(Pe,"DIV",{class:!0});var it=u(_e);x=r(it,"DIV",{class:!0});var Le=u(x);ue=r(Le,"BUTTON",{class:!0});var rt=u(ue);Se=q(rt,"Save Card"),rt.forEach(o),we=k(Le),Re(O.$$.fragment,Le),Je=k(Le),Te=r(Le,"BUTTON",{class:!0});var ot=u(Te);Ke=q(ot,"Export as PNG"),ot.forEach(o),Le.forEach(o),it.forEach(o),Pe.forEach(o),be.forEach(o),He.forEach(o),w.forEach(o),this.h()},h(){h(m,"class","label"),h(P,"class","input"),h(P,"type","text"),h(P,"placeholder","Name"),h(S,"class","control"),h(g,"class","field"),h(d,"class","label"),h(z,"class","input"),h(z,"placeholder","3"),h(C,"class","control"),h(L,"class","field"),h(A,"class","label"),h(M,"class","input"),h(M,"placeholder","1"),h(y,"class","control"),h(B,"class","field"),h(re,"class","label"),h(le,"class","textarea"),h(le,"placeholder","Enter any extra text"),h(te,"class","control"),h(F,"class","field"),h(f,"class","label"),h(ae,"class","textarea"),h(ae,"placeholder","Enter flavor text"),h(K,"class","control"),h(V,"class","field"),h(_,"class","column is-half"),Oe(Y,"width","600px"),Oe(Y,"height","400px"),Oe(Y,"max-height","100%"),h(Y,"id","export-card"),h(ue,"class","button is-primary"),h(Te,"class","button is-dark"),h(x,"class","control"),h(_e,"class","field"),h(W,"class","column"),h(s,"class","columns is-flex-wrap-wrap-reverse"),h(t,"class","container")},m(v,w){ye(v,a,w),e(a,t),e(t,s),e(s,_),e(_,n),e(n,g),e(g,m),e(m,p),e(g,T),e(g,S),e(S,P),he(P,l[1]),e(n,j),e(n,L),e(L,d),e(d,se),e(L,ne),e(L,C),e(C,z),he(z,l[2]),e(n,G),e(n,B),e(B,A),e(A,ge),e(B,$),e(B,y),e(y,M),he(M,l[3]),e(n,de),Be(N,n,null),e(n,ee),Be(X,n,null),e(n,ie),Be(U,n,null),e(n,c),e(n,J),e(n,ve),e(n,F),e(F,re),e(re,Q),e(F,R),e(F,te),e(te,le),he(le,l[7]),e(n,oe),e(n,V),e(V,f),e(f,b),e(V,E),e(V,K),e(K,ae),he(ae,l[6]),e(s,ce),e(s,W),e(W,Y),Be(Z,Y,null),l[24](Y),e(W,Ae),e(W,Ee),e(W,fe),e(W,_e),e(_e,x),e(x,ue),e(ue,Se),e(x,we),Be(O,x,null),e(x,Je),e(x,Te),e(Te,Ke),Ue=!0,Qe||(We=[Ie(P,"input",l[18]),Ie(z,"input",l[19]),Ie(M,"input",l[20]),Ie(le,"input",l[22]),Ie(ae,"input",l[23]),Ie(ue,"click",l[16]),Ie(Te,"click",l[17])],Qe=!0)},p(v,[w]){w&2&&P.value!==v[1]&&he(P,v[1]),w&4&&z.value!==v[2]&&he(z,v[2]),w&8&&M.value!==v[3]&&he(M,v[3]);const He={};w&16&&(He.tags=v[4]),N.$set(He);const be={};w&32&&(be.selectedTags=v[5]),w&32&&(be.onTagsChange=v[21]),X.$set(be);const qe={};w&1&&(qe.actions=v[0]),U.$set(qe),w&128&&he(le,v[7]),w&64&&he(ae,v[6]);const D={};w&2&&(D.title=v[1]),w&16&&(D.itemTags=v[4]),w&32&&(D.range=v[5]),w&64&&(D.flavorText=v[6]),w&128&&(D.extraText=v[7]),w&1&&(D.actions=v[0]),w&4&&(D.health=v[2]),w&8&&(D.stamina=v[3]),Z.$set(D);const De={};w&512&&(De.templateCards=v[9]),O.$set(De)},i(v){Ue||(ke(N.$$.fragment,v),ke(X.$$.fragment,v),ke(U.$$.fragment,v),ke(Z.$$.fragment,v),ke(O.$$.fragment,v),Rt(()=>{Ue&&(me||(me=ct(a,ft,{},!0)),me.run(1))}),Ue=!0)},o(v){Ve(N.$$.fragment,v),Ve(X.$$.fragment,v),Ve(U.$$.fragment,v),Ve(Z.$$.fragment,v),Ve(O.$$.fragment,v),me||(me=ct(a,ft,{},!1)),me.run(0),Ue=!1},d(v){v&&o(a),je(N),je(X),je(U),je(Z),l[24](null),je(O),v&&me&&me.end(),Qe=!1,Bt(We)}}}const bt="",pt="",Tt="",Dt="",It="";function Qt(l){const a=document.createElement("a");a.href=l,a.download="rune_card.png",a.click()}function Wt(l,a,t){let s;jt(l,ut,c=>t(9,s=c));const _=[],n=[],g=[];let m=bt,p=pt,T=Tt,S=_,P=n,j=Dt,L=It,d=g;function se(c){t(1,m=(c==null?void 0:c.title)||bt),t(2,p=(c==null?void 0:c.health)||pt),t(3,T=(c==null?void 0:c.stamina)||Tt),t(4,S=(c==null?void 0:c.itemTags)||_),t(5,P=(c==null?void 0:c.range)||n),t(6,j=(c==null?void 0:c.flavorText)||Dt),t(7,L=(c==null?void 0:c.extraText)||It),t(0,d=(c==null?void 0:c.actions)||g)}function ne(c){t(0,d=[...d,c])}function C(c){t(0,d=d.map(J=>J.id===c.id?c:J))}function z(c){t(0,d=d.filter(J=>J.id!==c.id))}function G(c){t(4,S=c)}const B={0:"Same",1:"Adjacent",2:"2",3:"3"};function A(){B[P]}function ge(){ut.add({title:m,health:p,stamina:T,itemTags:S,range:P,flavorText:j,extraText:L,actions:d})}let $;function y(){zt($).then(c=>{const J=c.toDataURL("image/png");Qt(J)})}function M(){m=this.value,t(1,m)}function de(){p=this.value,t(2,p)}function N(){T=this.value,t(3,T)}const ee=c=>t(5,P=c);function X(){L=this.value,t(7,L)}function ie(){j=this.value,t(6,j)}function U(c){yt[c?"unshift":"push"](()=>{$=c,t(8,$)})}return l.$$.update=()=>{l.$$.dirty&1&&A()},[d,m,p,T,S,P,j,L,$,s,se,ne,C,z,G,B,ge,y,M,de,N,ee,X,ie,U]}class el extends kt{constructor(a){super(),Vt(this,a,Wt,Kt,At,{})}}export{el as component};
